
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="The databrowser command line interface" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://freva-org.github.io/databrowser/cli.html" />
<meta property="og:site_name" content="Freva Databrowser" />
<meta property="og:description" content="This section introduces the usage of the freva-client databrowser sub command. Please see the Installation and configuration section on how to install and configure the command line interface. Afte..." />
<meta name="description" content="This section introduces the usage of the freva-client databrowser sub command. Please see the Installation and configuration section on how to install and configure the command line interface. Afte..." />
<meta name="twitter:card" content="summary_large_image">
<meta name="keywords" content="freva, climate, data, evaluation, science, reproducibility">

    <title>The databrowser command line interface &#8212; Freva Databrowser 2507.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/code-tabs.css?v=1bc26e2f" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=811611d3"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/code-tabs.js?v=c983d12e"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'databrowser/cli';</script>
    <link rel="canonical" href="http://127.0.0.1:8000/databrowser/cli.html" />
    <link rel="icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer REST API Overview" href="../developers/index.html" />
    <link rel="prev" title="Databrowser python module" href="python-lib.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Freva Databrowser 2507.0.0 documentation - Home"/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Freva Databrowser 2507.0.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../auth/index.html">
    Authentication & Authorization
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Search for data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developers/index.html">
    Developer REST API Overview
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/freva-org/freva-nextgen/freva-client" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../auth/index.html">
    Authentication & Authorization
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Search for data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developers/index.html">
    Developer REST API Overview
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/freva-org/freva-nextgen/freva-client" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="python-lib.html">Databrowser python module</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">The databrowser command line interface</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Search for data</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">The databrowser command line interface</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="the-databrowser-command-line-interface">
<h1>The databrowser command line interface<a class="headerlink" href="#the-databrowser-command-line-interface" title="Link to this heading">#</a></h1>
<div class="toctree-wrapper compound" id="databrowser-cli">
</div>
<p>This section introduces the usage of the <code class="docutils literal notranslate"><span class="pre">freva-client</span> <span class="pre">databrowser</span></code> sub command.
Please see the <a class="reference internal" href="../index.html#install-configure"><span class="std std-ref">Installation and configuration</span></a> section on how to install and
configure the command line interface.</p>
<p>After successful installation you can use the <code class="docutils literal notranslate"><span class="pre">freva-client</span> <span class="pre">databrowser</span></code> sub
command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser --help</span>
</pre></div>
</div>
<section id="searching-for-data-locations">
<h2>Searching for data locations<a class="headerlink" href="#searching-for-data-locations" title="Link to this heading">#</a></h2>
<p>Getting the locations of the data is probably the most common use case of the
databrowser application. You can search for data locations by applying the
<code class="docutils literal notranslate"><span class="pre">data-search</span></code> sub-command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-search --help</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: freva-client databrowser data-search [OPTIONS] [SEARCH_KEYS]...

  Search the databrowser for datasets.

Arguments:
  [SEARCH_KEYS]...  Refine your data search with this `key=value` pair search
                    parameters. The parameters could be, depending on the DRS
                    standard, flavour product, project model etc.

Options:
  --facet TEXT                    If you are not sure about the correct search
                                  key&#39;s you can use the ``--facet`` flag to
                                  search of any matching entries. For example
                                  --facet &#39;era5&#39; would allow you to search for
                                  any entries containing era5, regardless of
                                  project, product etc.
  -u, --uniq-key [file|uri]       The type of search result, which can be
                                  either “file” or “uri”. This parameter
                                  determines whether the search will be based
                                  on file paths or Uniform Resource
                                  Identifiers  [default: file]
  -f, --flavour [freva|cmip6|cmip5|cordex|nextgems|user]
                                  The Data Reference Syntax (DRS) standard
                                  specifying the type of climate datasets to
                                  query.  [default: freva]
  -ts, --time-select [strict|flexible|file]
                                  Operator that specifies how the time period
                                  is selected. Choose from flexible (default),
                                  strict or file. ``strict`` returns only
                                  those files that have the *entire* time
                                  period covered. The time search ``2000 to
                                  2012`` will not select files containing data
                                  from 2010 to 2020 with the ``strict``
                                  method. ``flexible`` will select those files
                                  as ``flexible`` returns those files that
                                  have start or end period covered. ``file``
                                  will only return files where the entire time
                                  period is contained within *one single*
                                  file.  [default: flexible]
  --zarr                          Create zarr stream files.
  -tf, --token-file PATH          Instead of authenticating via code based
                                  authentication flow you can set the path to
                                  the json file that contains a `refresh
                                  token` containing a refresh_token key.
  -t, --time TEXT                 Special search facet to refine/subset search
                                  results by time. This can be a string
                                  representation of a time range or a single
                                  time step. The time steps have to follow
                                  ISO-8601. Valid strings are
                                  ``%Y-%m-%dT%H:%M`` to ``%Y-%m-%dT%H:%M`` for
                                  time ranges and ``%Y-%m-%dT%H:%M``.
                                  **Note**: You don&#39;t have to give the full
                                  string format to subset time steps ``%Y``,
                                  ``%Y-%m`` etc are also valid.
  -b, --bbox &lt;FLOAT FLOAT FLOAT FLOAT&gt;...
                                  Special search facet to refine/subset search
                                  results by spatial extent. This can be a
                                  string representation of a bounding box. The
                                  bounding box has to follow the format
                                  ``min_lon max_lon min_lat max_lat``. Valid
                                  strings are ``-10 10 -10 10`` to ``0 5 0
                                  5``.
  -bs, --bbox-select [strict|flexible|file]
                                  Operator that specifies how the spatial
                                  extent is selected. Choose from flexible
                                  (default), strict or file. ``strict``
                                  returns only those files that have the
                                  *entire* spatial extent covered. The bbox
                                  search ``-10 10 -10 10`` will not select
                                  files containing data from 0 5 0 5 with the
                                  ``strict`` method. ``flexible`` will select
                                  those files as ``flexible`` returns those
                                  files that have any part of the extent
                                  covered. ``file`` will only return files
                                  where the entire spatial extent is contained
                                  within *one single* file.  [default:
                                  flexible]
  -j, --json                      Parse output in json format.
  --host TEXT                     Set the hostname of the databrowser, if not
                                  set (default) the hostname is read from a
                                  config file
  -v                              Increase verbosity  [default: 0]
  --multi-version                 Select all versions and not just the latest
                                  version (default).
  -V, --version                   Show version an exit
  --help                          Show this message and exit.

</pre></div>
</div>
<p>The command expects a list of key=value pairs. The order of the
pairs doesn’t really matter. Most important is that you don’t need to
split the search according to the type of data you are searching for.
You can search for files within observations, reanalysis and
model data at the same time. Also important is that all queries are
case <em>insensitive</em>. You can also search for attributes themselves
instead of file paths. For example you can search for the list of
variables available that satisfies a certain constraint (e.g. sampled
6hr, from a certain model, etc).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-search project=observations variable=pr model=cp*</span>
</pre></div>
</div>
<p>There are many more options for defining a value for a given key:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute syntax</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute=value</span></code></p></td>
<td><p>Search for files
containing exactly
that attribute</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute='val\*'</span></code></p></td>
<td><p>Search for files
containing a value for
attribute that starts
with the prefix val</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute='*lue'</span></code></p></td>
<td><p>Search for files
containing a value for
attribute that ends
with the suffix lue</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute='*alu\*'</span></code></p></td>
<td><p>Search for files
containing a value for
attribute that has alu
somewhere</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute='/.*alu.*/'</span></code></p></td>
<td><p>Search for files
containing a value for
attribute that matches
the given regular
expression (yes! you
might use any regular
expression to find
what you want.)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute=value1</span> <span class="pre">attribute=value2</span></code></p>
<p>OR:</p>
<p><code class="docutils literal notranslate"><span class="pre">attribute={value1,value2}</span></code></p>
</td>
<td><p>Search for files
containing either
value1 OR value2 for
the given attribute
(note that’s the same
attribute twice!)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute1=value1</span> <span class="pre">attribute2=value2</span></code></p></td>
<td><p>Search for files
containing value1 for
attribute1 AND value2
for attribute2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute_not_=value</span></code></p></td>
<td><p>Search for files NOT
containing value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute_not_=value1</span> <span class="pre">attribute_not_=value2</span></code></p></td>
<td><p>Search for files
containing neither
value1 nor value2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using * remember that your shell might give it a
different meaning (normally it will try to match files with that name)
to turn that off you can use backslash (key=*) or use quotes (key=’*’).</p>
</div>
<section id="searching-multi-versioned-datasets">
<h3>Searching multi-versioned datasets<a class="headerlink" href="#searching-multi-versioned-datasets" title="Link to this heading">#</a></h3>
<p>In datasets with multiple versions only the <cite>latest</cite> version (i.e. <cite>highest</cite>
version number) is returned by default. Querying a specific version from a
multi versioned datasets requires the <code class="docutils literal notranslate"><span class="pre">multi-version</span></code> flag in combination with
the <code class="docutils literal notranslate"><span class="pre">version</span></code> special attribute:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-search dataset=cmip6-fs model=access-cm2 --multi-version version=v20191108</span>
</pre></div>
</div>
<p>If no particular <code class="docutils literal notranslate"><span class="pre">version</span></code> is requested, all versions will be returned.</p>
</section>
<section id="streaming-files-via-zarr">
<h3>Streaming files via zarr<a class="headerlink" href="#streaming-files-via-zarr" title="Link to this heading">#</a></h3>
<p>Instead of getting the file locations on disk or tape, you can instruct the
system to register zarr streams. Which means that instead of opening the
data directly you can open it via zarr from anywhere. To do so simply add
the <code class="docutils literal notranslate"><span class="pre">--zarr</span></code> flag.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before you can use the <code class="docutils literal notranslate"><span class="pre">--zarr</span></code> flag you will have
to create an access token and use that token to log on to the system
see also the <a class="reference internal" href="../auth/index.html#auth"><span class="std std-ref">Authentication &amp; Authorization</span></a> chapter for more details on token creation.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client auth &gt; .token.json</span>
<span class="go">chmod 600 .token.json</span>
<span class="go">freva-client databrowser data-search dataset=cmip6-fs --zarr --token-file .token.json</span>
</pre></div>
</div>
</section>
<section id="special-cases-searching-for-times">
<h3>Special cases: Searching for times<a class="headerlink" href="#special-cases-searching-for-times" title="Link to this heading">#</a></h3>
<p>For example you want to know how many files we have between a certain time range
To do so you can use the <cite>time</cite> search key to subset time steps and whole time
ranges:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-search project=observations -t &#39;2016-09-02T22:15 to 2016-10&#39;</span>
</pre></div>
</div>
<p>The default method for selecting time periods is <code class="docutils literal notranslate"><span class="pre">flexible</span></code>, which means
all files are selected that cover at least start or end date. The
<code class="docutils literal notranslate"><span class="pre">strict</span></code> method implies that the <em>entire</em> search time period has to be
covered by the files. Using the <code class="docutils literal notranslate"><span class="pre">strict</span></code> method in the example above would
only yield on file because the first file contains time steps prior to the
start of the time period:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-search project=observations -t &#39;2016-09-02T22:15 to 2016-10&#39; -ts strict</span>
</pre></div>
</div>
<p>Giving single time steps is also possible:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-search project=observations -t 2016-09-02T22:10</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The time format has to follow the
<a class="reference external" href="https://en.wikipedia.og/wiki/ISO_8601">ISO-8601</a> standard. Time <em>ranges</em>
are indicated by the <code class="docutils literal notranslate"><span class="pre">to</span></code> keyword such as <code class="docutils literal notranslate"><span class="pre">2000</span> <span class="pre">to</span> <span class="pre">2100</span></code> or
<code class="docutils literal notranslate"><span class="pre">2000-01</span> <span class="pre">to</span> <span class="pre">2100-12</span></code> and alike. Single time steps are given without the
<code class="docutils literal notranslate"><span class="pre">to</span></code> keyword.</p>
</div>
</section>
</section>
<section id="creating-intake-esm-catalouges">
<h2>Creating intake-esm catalouges<a class="headerlink" href="#creating-intake-esm-catalouges" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">intake-catalogue</span></code> sub command allows you to create an
<cite>intake-esm catalogue &lt;https://intake-esm.readthedocs.io/en/stable/&gt;_</cite> from
the current search. This can be useful to share the catalogue with others
or merge datasets.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser intake-catalogue --help</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: freva-client databrowser intake-catalogue [OPTIONS] [SEARCH_KEYS]...

  Create an intake catalogue from the search.

Arguments:
  [SEARCH_KEYS]...  Refine your data search with this `key=value` pair search
                    parameters. The parameters could be, depending on the DRS
                    standard, flavour product, project model etc.

Options:
  --facet TEXT                    If you are not sure about the correct search
                                  key&#39;s you can use the ``--facet`` flag to
                                  search of any matching entries. For example
                                  --facet &#39;era5&#39; would allow you to search for
                                  any entries containing era5, regardless of
                                  project, product etc.
  -u, --uniq-key [file|uri]       The type of search result, which can be
                                  either “file” or “uri”. This parameter
                                  determines whether the search will be based
                                  on file paths or Uniform Resource
                                  Identifiers  [default: file]
  -f, --flavour [freva|cmip6|cmip5|cordex|nextgems|user]
                                  The Data Reference Syntax (DRS) standard
                                  specifying the type of climate datasets to
                                  query.  [default: freva]
  -ts, --time-select [strict|flexible|file]
                                  Operator that specifies how the time period
                                  is selected. Choose from flexible (default),
                                  strict or file. ``strict`` returns only
                                  those files that have the *entire* time
                                  period covered. The time search ``2000 to
                                  2012`` will not select files containing data
                                  from 2010 to 2020 with the ``strict``
                                  method. ``flexible`` will select those files
                                  as ``flexible`` returns those files that
                                  have start or end period covered. ``file``
                                  will only return files where the entire time
                                  period is contained within *one single*
                                  file.  [default: flexible]
  -t, --time TEXT                 Special search facet to refine/subset search
                                  results by time. This can be a string
                                  representation of a time range or a single
                                  time step. The time steps have to follow
                                  ISO-8601. Valid strings are
                                  ``%Y-%m-%dT%H:%M`` to ``%Y-%m-%dT%H:%M`` for
                                  time ranges and ``%Y-%m-%dT%H:%M``.
                                  **Note**: You don&#39;t have to give the full
                                  string format to subset time steps ``%Y``,
                                  ``%Y-%m`` etc are also valid.
  -b, --bbox &lt;FLOAT FLOAT FLOAT FLOAT&gt;...
                                  Special search facet to refine/subset search
                                  results by spatial extent. This can be a
                                  string representation of a bounding box. The
                                  bounding box has to follow the format
                                  ``min_lon max_lon min_lat max_lat``. Valid
                                  strings are ``-10 10 -10 10`` to ``0 5 0
                                  5``.
  -bs, --bbox-select [strict|flexible|file]
                                  Operator that specifies how the spatial
                                  extent is selected. Choose from flexible
                                  (default), strict or file. ``strict``
                                  returns only those files that have the
                                  *entire* spatial extent covered. The bbox
                                  search ``-10 10 -10 10`` will not select
                                  files containing data from 0 5 0 5 with the
                                  ``strict`` method. ``flexible`` will select
                                  those files as ``flexible`` returns those
                                  files that have any part of the extent
                                  covered. ``file`` will only return files
                                  where the entire spatial extent is contained
                                  within *one single* file.  [default:
                                  flexible]
  --zarr                          Create zarr stream files, as catalogue
                                  targets.
  -tf, --token-file PATH          Instead of authenticating via code based
                                  authentication flow you can set the path to
                                  the json file that contains a `refresh
                                  token` containing a refresh_token key.
  -f, --filename PATH             Path to the file where the catalogue, should
                                  be written to. if None given (default) the
                                  catalogue is parsed to stdout.
  --host TEXT                     Set the hostname of the databrowser, if not
                                  set (default) the hostname is read from a
                                  config file
  -v                              Increase verbosity  [default: 0]
  --multi-version                 Select all versions and not just the latest
                                  version (default).
  -V, --version                   Show version an exit
  --help                          Show this message and exit.

</pre></div>
</div>
<p>You can either set the <code class="docutils literal notranslate"><span class="pre">--filename</span></code> flag to save the catalogue to a <code class="docutils literal notranslate"><span class="pre">.json</span></code>
file or pipe the catalogue to stdout (default). Just like for the <code class="docutils literal notranslate"><span class="pre">data-search</span></code>
sub command you can instruct the system to create zarr file streams to access
the data via zarr.</p>
</section>
<section id="creating-stac-catalogue">
<h2>Creating STAC Catalogue<a class="headerlink" href="#creating-stac-catalogue" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">stac-catalogue</span></code> sub command allows you to create a static
<cite>SpatioTemporal Asset Catalog (STAC) &lt;https://stacspec.org/en/about/stac-spec/&gt;_</cite>
from the current search. This can be useful for creating, sharing and using
standardized geospatial data catalogs and enabling interoperability between
different data systems.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser stac-catalogue --help</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: freva-client databrowser stac-catalogue [OPTIONS] [SEARCH_KEYS]...

  Create a static STAC catalogue from the search.

Arguments:
  [SEARCH_KEYS]...  Refine your data search with this `key=value` pair search
                    parameters. The parameters could be, depending on the DRS
                    standard, flavour product, project model etc.

Options:
  --facet TEXT                    If you are not sure about the correct search
                                  key&#39;s you can use the ``--facet`` flag to
                                  search of any matching entries. For example
                                  --facet &#39;era5&#39; would allow you to search for
                                  any entries containing era5, regardless of
                                  project, product etc.
  -u, --uniq-key [file|uri]       The type of search result, which can be
                                  either “file” or “uri”. This parameter
                                  determines whether the search will be based
                                  on file paths or Uniform Resource
                                  Identifiers  [default: file]
  -f, --flavour [freva|cmip6|cmip5|cordex|nextgems|user]
                                  The Data Reference Syntax (DRS) standard
                                  specifying the type of climate datasets to
                                  query.  [default: freva]
  -ts, --time-select [strict|flexible|file]
                                  Operator that specifies how the time period
                                  is selected. Choose from flexible (default),
                                  strict or file. ``strict`` returns only
                                  those files that have the *entire* time
                                  period covered. The time search ``2000 to
                                  2012`` will not select files containing data
                                  from 2010 to 2020 with the ``strict``
                                  method. ``flexible`` will select those files
                                  as ``flexible`` returns those files that
                                  have start or end period covered. ``file``
                                  will only return files where the entire time
                                  period is contained within *one single*
                                  file.  [default: flexible]
  -t, --time TEXT                 Special search facet to refine/subset search
                                  results by time. This can be a string
                                  representation of a time range or a single
                                  time step. The time steps have to follow
                                  ISO-8601. Valid strings are
                                  ``%Y-%m-%dT%H:%M`` to ``%Y-%m-%dT%H:%M`` for
                                  time ranges and ``%Y-%m-%dT%H:%M``.
                                  **Note**: You don&#39;t have to give the full
                                  string format to subset time steps ``%Y``,
                                  ``%Y-%m`` etc are also valid.
  -b, --bbox &lt;FLOAT FLOAT FLOAT FLOAT&gt;...
                                  Special search facet to refine/subset search
                                  results by spatial extent. This can be a
                                  string representation of a bounding box. The
                                  bounding box has to follow the format
                                  ``min_lon max_lon min_lat max_lat``. Valid
                                  strings are ``-10 10 -10 10`` to ``0 5 0
                                  5``.
  -bs, --bbox-select [strict|flexible|file]
                                  Operator that specifies how the spatial
                                  extent is selected. Choose from flexible
                                  (default), strict or file. ``strict``
                                  returns only those files that have the
                                  *entire* spatial extent covered. The bbox
                                  search ``-10 10 -10 10`` will not select
                                  files containing data from 0 5 0 5 with the
                                  ``strict`` method. ``flexible`` will select
                                  those files as ``flexible`` returns those
                                  files that have any part of the extent
                                  covered. ``file`` will only return files
                                  where the entire spatial extent is contained
                                  within *one single* file.  [default:
                                  flexible]
  --host TEXT                     Set the hostname of the databrowser, if not
                                  set (default) the hostname is read from a
                                  config file
  -v                              Increase verbosity  [default: 0]
  --multi-version                 Select all versions and not just the latest
                                  version (default).
  -V, --version                   Show version an exit
  -o, --filename PATH             Path to the file where the static STAC
                                  catalogue, should be written to. If you
                                  don&#39;t specify or the path does not exist,
                                  the file will be created in the current
                                  working directory.
  --help                          Show this message and exit.

</pre></div>
</div>
<p>To get an static STAC catalogue you can use the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser stac-catalogue --filename /path/to/output</span>
</pre></div>
</div>
<p>and if the specified filename directory doesn’t specify or not existed or not provided,
the STAC catalogue will be saved in the current directory. It can be
only a directory or a fully qualified filename.</p>
<p>The STAC Catalogue provides multiple ways to access and interact with the data:</p>
<ul class="simple">
<li><p>Access your climate data through the intake-esm data catalog specification</p></li>
<li><p>Access search results as Zarr files, available as STAC Assets at both collection and item levels</p></li>
<li><p>Browse and explore your search results directly through the Freva DataBrowser web interface</p></li>
</ul>
<p>Each of these access methods is encoded as STAC Assets, making them easily discoverable and accessible through any STAC-compatible tool.</p>
</section>
<section id="query-the-number-of-occurrences">
<h2>Query the number of occurrences<a class="headerlink" href="#query-the-number-of-occurrences" title="Link to this heading">#</a></h2>
<p>In some cases it might be useful to know how many files are found in the
databrowser for certain search constraints. In such cases you can use the
<code class="docutils literal notranslate"><span class="pre">data-count</span></code> sub command to count the number of <em>found</em> files instead of getting
the files themselves.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-count --help</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal notranslate"><span class="pre">data-count</span></code> sub command will display the total number of items
matching your search query. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-count project=observations</span>
</pre></div>
</div>
<p>If you want to group the number of occurrences by search categories (facets)
use the <code class="docutils literal notranslate"><span class="pre">-d</span></code> or <code class="docutils literal notranslate"><span class="pre">--detail</span></code> flag:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser data-count -d project=observations</span>
</pre></div>
</div>
</section>
<section id="retrieving-the-available-metadata">
<h2>Retrieving the available metadata<a class="headerlink" href="#retrieving-the-available-metadata" title="Link to this heading">#</a></h2>
<p>Sometime it might be useful to know about possible values that search attributes.
For this you use the <code class="docutils literal notranslate"><span class="pre">metadata-search</span></code> sub command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search --help</span>
</pre></div>
</div>
<p>Just like with any other databrowser command you can apply different search
constraints when acquiring metadata</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search project=observations</span>
</pre></div>
</div>
<p>By default the command will display only the most commonly used metadata
keys. To retrieve all metadata you can use the <code class="docutils literal notranslate"><span class="pre">-e</span></code> or <code class="docutils literal notranslate"><span class="pre">--extended-search</span></code>
flag.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search -e project=observations</span>
</pre></div>
</div>
<p>Sometimes you don’t exactly know the exact names of the search keys and
want retrieve all file objects that match a certain category. For example
for getting all ocean reanalysis datasets you can apply the <code class="docutils literal notranslate"><span class="pre">--facet</span></code> flag:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search -e realm=ocean --facet &#39;rean*&#39;</span>
</pre></div>
</div>
<section id="expert-tip-getting-metadata-for-certain-files">
<h3>Expert tip: Getting metadata for certain files<a class="headerlink" href="#expert-tip-getting-metadata-for-certain-files" title="Link to this heading">#</a></h3>
<p>In some cases it might be useful to retrieve metadata for certain
file or object store locations. For example if we wanted to retrieve the
metadata of those files on tape:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search -e file=&quot;/arch/*&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="parsing-the-command-output">
<h2>Parsing the command output<a class="headerlink" href="#parsing-the-command-output" title="Link to this heading">#</a></h2>
<p>You might have already noticed that each command has a <code class="docutils literal notranslate"><span class="pre">--json</span></code> flag.
Enabling this flag lets you parse the output of each command to JSON.</p>
<p>Following on from the example above we can parse the output of the reverse
search to the <a class="reference external" href="https://jqlang.github.io/jq/">command line json processor jq</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search -e file=&quot;/arch/*&quot; --json</span>
</pre></div>
</div>
<p>By using the pipe operator <code class="docutils literal notranslate"><span class="pre">|</span></code> the JSON output of the <cite>freva-client</cite>
commands can be piped and processed by <code class="docutils literal notranslate"><span class="pre">jq</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">freva-client databrowser metadata-search -e file=&quot;/arch/*&quot; --json | jq -r .ensemble[0]</span>
</pre></div>
</div>
<p>The above example will select only the first entry of the ensembles that
are associated with files on the tape archive.</p>
</section>
<section id="adding-and-deleting-user-data">
<h2>Adding and Deleting User Data<a class="headerlink" href="#adding-and-deleting-user-data" title="Link to this heading">#</a></h2>
<p>You can manage your personal datasets within the databrowser by adding or deleting user-specific data. This functionality allows you to include your own data files into the databrowser, making them accessible for analysis and retrieval alongside other datasets.</p>
<p>Before using the <cite>user-data</cite> commands, you need to create an access token and authenticate with the system. Please refer to the <a class="reference internal" href="../auth/index.html#auth"><span class="std std-ref">Authentication &amp; Authorization</span></a> chapter for more details on token creation and authentication.</p>
<section id="adding-user-data">
<h3>Adding User Data<a class="headerlink" href="#adding-user-data" title="Link to this heading">#</a></h3>
<p>To add your data to the databrowser, use the <cite>user-data add</cite> command. You’ll need to provide the paths to your data files, and any metadata you’d like to associate with your data.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">token=$(freva-client auth -u janedoe | jq -r .access_token)</span>
<span class="go">freva-client databrowser user-data add \</span>
<span class="go">    --path freva-rest/src/freva_rest/databrowser_api/mock/ \</span>
<span class="go">    --facet project=cordex \</span>
<span class="go">    --facet experiment=rcp85 \</span>
<span class="go">    --facet model=mpi-m-mpi-esm-lr-clmcom-cclm4-8-17-v1 \</span>
<span class="go">    --facet variable=tas \</span>
<span class="go">    --access-token $token</span>
</pre></div>
</div>
<p>This command adds the specified data files to the databrowser and tags them with the provided metadata. These search filters help in indexing and searching your data within the system.</p>
</section>
<section id="deleting-user-data">
<h3>Deleting User Data<a class="headerlink" href="#deleting-user-data" title="Link to this heading">#</a></h3>
<p>If you need to remove your data from the databrowser, use the <cite>user-data delete</cite> command. Provide your the search keys (facets) that identify the user data you wish to delete.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">token=$(freva-client auth -u janedoe | jq -r .access_token)</span>
<span class="go">freva-client databrowser user-data delete \</span>
<span class="go">    --search-key project=cordex \</span>
<span class="go">    --search-key experiment=rcp85 \</span>
<span class="go">    --access-token $token</span>
</pre></div>
</div>
<p>This command deletes all data entries that match the specified search keys from the databrowser.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="python-lib.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Databrowser python module</p>
      </div>
    </a>
    <a class="right-next"
       href="../developers/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Developer REST API Overview</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-for-data-locations">Searching for data locations</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching-multi-versioned-datasets">Searching multi-versioned datasets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streaming-files-via-zarr">Streaming files via zarr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#special-cases-searching-for-times">Special cases: Searching for times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-intake-esm-catalouges">Creating intake-esm catalouges</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-stac-catalogue">Creating STAC Catalogue</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#query-the-number-of-occurrences">Query the number of occurrences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-the-available-metadata">Retrieving the available metadata</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#expert-tip-getting-metadata-for-certain-files">Expert tip: Getting metadata for certain files</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parsing-the-command-output">Parsing the command output</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-and-deleting-user-data">Adding and Deleting User Data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-user-data">Adding User Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-user-data">Deleting User Data</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, DKRZ.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>